<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="inicio" content="width=device-width, initial-scale=1">
        <title>Manejo de Base de Datos</title>
        <link rel ="stylesheet" href ="main.css">
    </head>
    <body>
        <main>
            <h1>Trabajo de manejo de base de datos</h1>
            <div class ="ejercicios">
                <h3>Deber Uno</h3>
                <p>explicar los conceptos basicos de base de datos relacionales</p>
                <p><b>concepto uno: tablas</b><br><b>definicion:</b> es la estructura principal de una base de datos relacional<br>
                <b>componentes:</b><br><b>filas:</b> cada fila representa una entidad individual <br>
                <strong>ejemplo SQL</strong>
            <div class="code-block">
                <div class="code-header">SQL</div>
                <pre><code>INSERT INTO estudiante (Nombre, Apellido, Edad, Nota)
                    VALUES ("Juan", "Carlos", 28, 7);</code></pre>
            </div><br>esto añade un nuevo registro a la tabla estudiante y se visualizaria de la siguiente forma: <br>
            <img src = "Imagenes/Deber1BD.png" alt=" visual del codigo luego de ser integrado en el SQL" width="700" height="auto"><br>
            en donde se visualiza el id del estudiante siendo 25, el nombre en mayusculas al igual que el Apellido, la edad de 28, la nota del estudiante y la fecha del registro realizado<br>
            <b>concepto dos: claves</b><br><b>clave primaria (o primary key):</b> es el identificador unico de cada tabla<br>
            <b>clave foranea (o foreign key):</b> es la seccion de una tabla que conecta con una primary key de otra tabla, generando una relacion entre ambas tablas.<br>
            <b>ejemplo SQL y visual:</b> una tabla de empleados que esta relacionada por id empleados con el trabajo de dicho empleado<br>
            <iframe width="560" height="315" src='https://dbdiagram.io/e/695544a739fa3db27be3289d/695544af39fa3db27be32952'> </iframe> <br>
            <b>concepto tres: relaciones.</b><br> hay 3 tipos de relaciones en las tablas, estas pueden ser uno a uno, uno a muchos, muchos a uno.<br>
            <b>relacion uno a uno:</b> un registro de tabla que se  relaciona con un registro de otra.<br>
            <b>relacion uno a muchos:</b> un registro de una tabla que se relaciona con varios registros de otras.<br>
            <b>relacion muchos a muchos:</b> requiere una tabla de intermediario para conectar multiples registros entre si.<br>
            <b>concepto cuatro: columnas</b> una columna en SQL representa un atributo o caracteristica de la entidad que se guarda en la tabla<br>
            <b>ejemplo:</b> en la tabla del dbdiagram se ve que los atributos de un trabajador son: id_empleado, nombre, apellido, email, fecha_ingreso, estado_empleado, y salario_base.<br>
            En donde el id del empleado es la llave primaria, la fecha de ingreso sera la fecha en la que se elaboro dicho registro.<br>
        </p>
            </div>
            <div class="ejercicios">
                <h3>Deber Dos</h3>
            <p>Consulta todos los estudiantes cuyo promedio sea mayor a 7. <br>
             <b>solucion:</b><br> Usando el codigo SQL: <br>
             <div class="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>SELECT Nombre, Apellido, Edad, Nota FROM estudiante WHERE Nota >= 7;</code></pre>
            </div> <br> donde select es el texto que imprimira la consulta, nombre, apellido, edad y nota son los valores que se visualizaran;<br> 
            from es el texto que nos indica de que tabla saldra la consulta, que en este caso es de la tabla estudiante; <br>
            where es la condicion que indica donde inicia la seleccion de la consulta,
            que seria donde las notas sean mayores o iguales a siete<br>
             Y se visualizara de la siguiente forma: <br>
             <img src="Imagenes/Ejercicio2BD.png" alt="Ejercicio 2 BD" width="400" height="auto">
        </p>
    </div>
    <div class="ejercicios">
        <h3>Deber Tres</h3>
        <p> Diseñar y normalizar una base de datos para un sistema de gestión de calificaciones académicas. <br>
            para esto haremos todo desde 0, y paso a paso añadiremos lo necesario para cumplir con los siguientes requisitos:<br>
            Mostrar todos los alumnos que se encuentran en primer semestre en el paralelo <br>
Mostrar todos los estudiantes que están en el paralelo B<br>
Mostrar las materias que se imparten en primer semestre<br>
Mostrar las materias que se imparten en segundo semestre<br>
Mostrar todas las actividades de una materia específica<br>
Mostrar el promedio final de la materia considerando:<br>
Deberes: 30%<br>
Lecciones: 20%<br>
Examen: 50%<br>
Mostrar todos los alumnos aprobados en primer semestre<br>
Mostrar todos los alumnos suspensos en segundo semestre<br>
para ello usamos el sigueinte codigo sql que añadira las tablas para la consulta<br>
        <div class="code-block">
            <div class ="code-header">SQL</div>
            <pre><code>-- Tabla de Estudiantes
CREATE TABLE Estudiantes (
    id_estudiante INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(100) NOT NULL,
    apellido VARCHAR(100) NOT NULL,
    fecha_nacimiento DATE,
    email VARCHAR(100) UNIQUE,
    id_curso INT
);

-- Tabla de Profesores
CREATE TABLE Profesores (
    id_profesor INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(100) NOT NULL,
    apellido VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE
);

-- Tabla de Cursos
CREATE TABLE Cursos (
    id_curso INT PRIMARY KEY AUTO_INCREMENT,
    nombre_curso VARCHAR(100) NOT NULL
);

-- Tabla de Asignaturas
CREATE TABLE Asignaturas (
    id_asignatura INT PRIMARY KEY AUTO_INCREMENT,
    nombre_asignatura VARCHAR(100) NOT NULL,
    id_profesor INT,
    FOREIGN KEY (id_profesor) REFERENCES Profesores(id_profesor)
);

-- Tabla de Calificaciones
CREATE TABLE Calificaciones (
    id_calificacion INT PRIMARY KEY AUTO_INCREMENT,
    id_estudiante INT,
    id_asignatura INT,
    nota DECIMAL(4,2) CHECK (nota >= 0 AND nota <= 10),
    fecha DATE,
    FOREIGN KEY (id_estudiante) REFERENCES Estudiantes(id_estudiante),
    FOREIGN KEY (id_asignatura) REFERENCES Asignaturas(id_asignatura)
);</code></pre> 
        </div> <br>
        antes de esto tenemos que añadir la foreign key de la tabla estudiantes con Alter table<br>
        <div class ="code-block">
            <div class ="code-header">SQL</div>
            <pre><code>ALTER TABLE Estudiantes
ADD CONSTRAINT fk_estudiante_curso
FOREIGN KEY (id_curso) REFERENCES Cursos(id_curso);</code></pre>
        </div><br>
        con esto ahora si podemos insertar datos para consultas usando los siguientes insert:<br>
        <div class ="code-block">
            <div class ="code-header">SQL</div>
            <pre><code>INSERT INTO Cursos (nombre_curso) VALUES 
('Primer Semestre - Paralelo A'),
('Primer Semestre - Paralelo B'),
('Segundo Semestre - Paralelo A'),
('Segundo Semestre - Paralelo B');</code></pre>
        </div><br>
        <div class="code-block">
            <div class="code-header">SQL</div>
            <pre><code>INSERT INTO Estudiantes (nombre, apellido, fecha_nacimiento, email, id_curso) VALUES
('Ana', 'Pérez', '2005-03-12', 'ana@mail.com', 1), -- 1er Semestre A
('Luis', 'García', '2004-07-22', 'luis@mail.com', 1), -- 1er Semestre A
('María', 'López', '2005-01-15', 'maria@mail.com', 2), -- 1er Semestre B
('Pedro', 'Torres', '2004-11-05', 'pedro@mail.com', 2), -- 1er Semestre B
('Sofía', 'Ramírez', '2003-09-30', 'sofia@mail.com', 3), -- 2do Semestre A
('Carlos', 'Mendoza', '2003-05-18', 'carlos@mail.com', 4); -- 2do Semestre B</code></pre>
        </div><br>
        <div class="code-block">
            <div class="code-header">SQL</div>
            <pre><code>INSERT INTO Profesores (nombre, apellido, email) VALUES
('Carlos', 'Gómez', 'cgomez@mail.com'),
('Elena', 'Martínez', 'emartinez@mail.com');</code></pre>
        </div><br>
        <div class="code-block">
            <div class="code-header">SQL</div>
            <pre><code>INSERT INTO Asignaturas (nombre_asignatura, id_profesor) VALUES
('Matemáticas I', 1), -- Primer semestre
('Lengua y Literatura I', 2), -- Primer semestre
('Física II', 1), -- Segundo semestre
('Historia II', 2); -- Segundo semestre</code></pre>
        </div><br>
        aqui añadire una tabla mas con datos para la consulta de las actividades que tiene una materia<br>
        <div class="code-block">
            <div class="code-header">SQL</div>
            <pre><code>CREATE TABLE Actividades (
    id_actividad INT PRIMARY KEY AUTO_INCREMENT,
    id_asignatura INT,
    tipo VARCHAR(50), -- Deber, Lección, Examen
    descripcion VARCHAR(200),
    FOREIGN KEY (id_asignatura) REFERENCES Asignaturas(id_asignatura)
);

INSERT INTO Actividades (id_asignatura, tipo, descripcion) VALUES
(1, 'Deber', 'Ejercicios de álgebra'),
(1, 'Lección', 'Prueba corta de fracciones'),
(1, 'Examen', 'Examen final de Matemáticas I'),
(3, 'Deber', 'Problemas de cinemática'),
(3, 'Examen', 'Examen final de Física II');</code></pre>
        </div> <br>
        <div class="code-block">
            <div class="code-header">SQL</div>
            <pre><code>INSERT INTO Calificaciones (id_estudiante, id_asignatura, nota, fecha) VALUES
(1, 1, 8.5, '2026-01-01'), -- Ana en Matemáticas I
(2, 1, 7.0, '2026-01-01'), -- Luis en Matemáticas I
(3, 2, 6.0, '2026-01-02'), -- María en Lengua I
(4, 2, 4.5, '2026-01-02'), -- Pedro en Lengua I
(5, 3, 9.0, '2026-01-03'), -- Sofía en Física II
(6, 4, 5.0, '2026-01-03'); -- Carlos en Historia II</code></pre>
        </div><br>
        con los datos ingresados podremos ahora proceder con las consultas debidas, iniciando con el punto 1.<br>
        <div class="code-block">
            <div class="code-header">SQL</div>
            <pre><code>SELECT * FROM Estudiantes 
JOIN Cursos ON Estudiantes.id_curso = Cursos.id_curso
WHERE Cursos.nombre_curso = 'Primer Semestre - Paralelo A';</code></pre>
        </div><br>
        el resultado de la consulta es <br>
        <img src="Imagenes/consulta1.png" alt="resultado consulta 1" width="600" height="auto"><br>
        procedemos con la consulta numero 2 <br>
        <div class="code-block">
            <div class="code-header">SQL</div>
            <pre><code>SELECT * FROM Estudiantes 
JOIN Cursos ON Estudiantes.id_curso = Cursos.id_curso
WHERE Cursos.nombre_curso LIKE '%Paralelo B%';</code></pre>
        </div><br>
        el resultado de la consulta es <br>
        <img src="Imagenes/consulta2.png" alt="resultado consulta 2" width="600" height="auto"><br>
        siguiente consulta <br>
        <div class="code-block">
            <div class="code-header">SQL</div>
            <pre><code>SELECT * FROM Asignaturas WHERE nombre_asignatura LIKE '% I';</code></pre>
        </div><br>
        la consulta se vera de la siguiente forma. <br>
        <img src="Imagenes/consulta3.png" alt="resultado de la consulta 3" width="400" height="auto"><br>
        hacia la siguiente consulta <br>
        <div class="code-block">
            <div class="code-header">SQL</div>
            <pre><code>SELECT * FROM Asignaturas WHERE nombre_asignatura LIKE '% II';</code></pre>
        </div><br>
        esta consulta se visualiza de esta manera: <br>
        <img src="Imagenes/consulta4.png" alt="resultado consulta 4" width="400" height="auto"><br>
        ahora iremos con la consulta numero cinco: <br>
        <div class="code-block">
            <div class="code-header">SQL</div>
            <pre><code>SELECT * FROM Actividades 
WHERE id_asignatura = (SELECT id_asignatura FROM Asignaturas WHERE nombre_asignatura = 'Matemáticas I');</code></pre>
        </div><br>
        esta consulta revelara las asignaturas de una materia específica y se vera de esta forma: <br>
        <img src="Imagenes/consulta5.png" alt="resultado de la consulta 5" width="400" height="auto"><br>
        la siguiente consulta es la numero seis: <br>
        <div class="code-block">
            <div class="code-header">SQL</div>
            <pre><code>SELECT e.nombre, e.apellido,
       SUM(CASE WHEN a.tipo='Deber' THEN c.nota*0.3
                WHEN a.tipo='Lección' THEN c.nota*0.2
                WHEN a.tipo='Examen' THEN c.nota*0.5 END) AS promedio_final
FROM Calificaciones c
JOIN Estudiantes e ON c.id_estudiante = e.id_estudiante
JOIN Asignaturas s ON c.id_asignatura = s.id_asignatura
JOIN Actividades a ON s.id_asignatura = a.id_asignatura
GROUP BY e.id_estudiante;</code></pre></div> <br>
esta consulta revela el promedio de los estudiantes y se visualiza de la siguiente forma: <br>
<img src="Imagenes/consulta6.png" alt="resultado consulta 6" width="400" height="auto"><br>
la consulta numero siete solicita los alumnos aprobados en primer semestre: <br>
<div class="code-block">
    <div class="code-header">SQL</div>
    <pre><code>SELECT e.nombre, e.apellido, c.nota
FROM Estudiantes e
JOIN Cursos cu ON e.id_curso = cu.id_curso
JOIN Calificaciones c ON e.id_estudiante = c.id_estudiante
WHERE cu.nombre_curso LIKE 'Primer Semestre%' AND c.nota >= 7;</code></pre>
</div><br>
esta consulta revela los alumnos aprobados en primer semestre y se visualiza de la siguiente forma: <br>
<img src="Imagenes/consulta7.png" alt="resultado consulta 7" width="400" height="auto"><br>
por ultimo la consulta numero ocho: <br>
<div class="code-block">
    <div class="code-header">SQL</div>
    <pre><code>SELECT e.nombre, e.apellido, c.nota
FROM Estudiantes e
JOIN Cursos cu ON e.id_curso = cu.id_curso
JOIN Calificaciones c ON e.id_estudiante = c.id_estudiante
WHERE cu.nombre_curso LIKE 'Segundo Semestre%' AND c.nota < 7;
    </code></pre>
</div><br>
esta consulta señala a los alumnos suspensos en segundo semestre y se visualiza de la siguiente forma: <br>
<img src="Imagenes/consulta8.png" alt="resultado consulta 8" width="400" height="auto"><br>
para finalizar esta tarea se ha elaborado el visual del diagrama de la base de datos creada en dbdiagram<br>
<iframe width="560" height="315" src='https://dbdiagram.io/e/6956b00939fa3db27bec57f5/6956b04d39fa3db27bec59fd'> </iframe>
</p>
    </div>
    <div class="ejercicios">
        <h3>deber 4: Sistema de Horarios de Clases</h3>
        <p>
            el objetivo de este deber es el siguiente: <br>
            Normalizar y diseñar una base de datos para el sistema de horarios de la carrera de Desarrollo de Software. <br>
            se creara una nueva base de datos sql que la denomimanemos "deber4" y en ella usaremos el siguiente codigo SQL:<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>-- Tabla de Cursos
CREATE TABLE Cursos (
    id_curso INT PRIMARY KEY AUTO_INCREMENT,
    nombre_curso VARCHAR(100) NOT NULL
);

-- Tabla de Estudiantes
CREATE TABLE Estudiantes (
    id_estudiante INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(100) NOT NULL,
    apellido VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE,
    id_curso INT,
    FOREIGN KEY (id_curso) REFERENCES Cursos(id_curso)
);

-- Tabla de Profesores
CREATE TABLE Profesores (
    id_profesor INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(100) NOT NULL,
    apellido VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE
);

-- Tabla de Asignaturas
CREATE TABLE Asignaturas (
    id_asignatura INT PRIMARY KEY AUTO_INCREMENT,
    nombre_asignatura VARCHAR(100) NOT NULL,
    id_profesor INT,
    FOREIGN KEY (id_profesor) REFERENCES Profesores(id_profesor)
);

-- Tabla de Aulas
CREATE TABLE Aulas (
    id_aula INT PRIMARY KEY AUTO_INCREMENT,
    nombre_aula VARCHAR(50) NOT NULL,
    capacidad INT
);

-- Tabla de Horarios
CREATE TABLE Horarios (
    id_horario INT PRIMARY KEY AUTO_INCREMENT,
    id_curso INT,
    id_asignatura INT,
    id_aula INT,
    dia_semana VARCHAR(20), -- Lunes, Martes, etc.
    hora_inicio TIME,
    hora_fin TIME,
    FOREIGN KEY (id_curso) REFERENCES Cursos(id_curso),
    FOREIGN KEY (id_asignatura) REFERENCES Asignaturas(id_asignatura),
    FOREIGN KEY (id_aula) REFERENCES Aulas(id_aula)
);</code></pre>
            </div><br>
            con este codigo dispondremos de las tablas necesarias para responder las siguientes consultas:<br>
            ¿En qué horarios imparte clases el docente X y qué materias dicta en cada horario? <br>
            ¿Qué docente imparte la materia X y en qué días y horas se dicta? <br>
            ¿Qué materias imparte el docente X durante toda la semana? <br>
            ¿Cuántas horas a la semana dicta el docente X y qué materias corresponden a esas horas? <br> 
            ¿En qué días y en qué horarios se dicta la materia Base de Datos, y quién es el docente encargado? <br>
            ¿Qué materias dicta el docente X los días lunes y miércoles? <br>
            ¿Qué materias están programadas el miércoles y qué docente imparte cada una? <br>
            ahora procedemos a insertar datos en las tablas para poder realizar las consultas:<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>-- Cursos
INSERT INTO Cursos (nombre_curso) VALUES ('cuarto semestre');

-- Profesores
INSERT INTO Profesores (nombre, apellido, email) 
VALUES ('Darwin', 'Chamba', 'ChambaD@gmail.com'), ("Karelys", "Arredondo", "KareliA@gmail.com");

-- Asignaturas
INSERT INTO Asignaturas (nombre_asignatura, id_profesor) 
VALUES ('programacion orientada a objetos', 1), ("arquitectura de software",2), 
("manejo de base de datos",1),("realidad nacional-deberes y derechos",2);

-- Aulas
INSERT INTO Aulas (nombre_aula, capacidad) 
VALUES ('aula1', 15), ('aula 7', 12);

-- Horarios
INSERT INTO Horarios (id_curso, id_asignatura, id_aula, dia_semana, hora_inicio, hora_fin)
VALUES (1, 1, 1, 'martes', '06:00:00', '08:00:00');</code></pre>
            </div>
        <br>
        aun faltan unos datos mas para realizar las consultas pero ya tenemos una base solida para empezar<br>
        ahora procedemos con las consultas solicitadas:<br>
        <div class ="code-block">
            <div class ="code-header">SQL</div>
            <pre><code>SELECT p.nombre AS docente, a.nombre_asignatura, h.dia_semana, h.hora_inicio, h.hora_fin
FROM Horarios h
JOIN Asignaturas a ON h.id_asignatura = a.id_asignatura
JOIN Profesores p ON a.id_profesor = p.id_profesor
WHERE p.nombre = 'Darwin';</code></pre><br>
este codigo revela los horarios del docente X y las materias que dicta en cada horario<br>
la visualizacion es la siguiente: <br>
<img src="Imagenes/consultad4.1.png" alt="consulta deber 4 punto 1" width="400" height="auto"><br>
el punto de consulta dos es el siguiente:<br>
<div class ="code-block">
    <div class ="code-header">SQL</div>
    <pre><code>SELECT a.nombre_asignatura, p.nombre AS docente, h.dia_semana, h.hora_inicio, h.hora_fin
FROM Horarios h
JOIN Asignaturas a ON h.id_asignatura = a.id_asignatura
JOIN Profesores p ON a.id_profesor = p.id_profesor
WHERE a.nombre_asignatura = 'arquitectura de software';</code></pre></div><br>
este codigo nos indica que docente imparte la materia X y en que dias y horas se dicta<br>
la visualizacion es la siguiente: <br>
<img src="Imagenes/consultad4.2.png" alt="consulta deber 4 punto 2" width="400" height="auto"><br>
la consulta numero tres es la siguiente:<br>
<div class ="code-block">
    <div class ="code-header">SQL</div>
    <pre><code>SELECT DISTINCT a.nombre_asignatura
FROM Horarios h
JOIN Asignaturas a ON h.id_asignatura = a.id_asignatura
JOIN Profesores p ON a.id_profesor = p.id_profesor
WHERE p.nombre = 'darwin';
</code></pre></div><br>
este codigo indica que materias imparte el docente X durante toda la semana<br>
la visualizacion es la siguiente: <br>
<img src="Imagenes/consultad4.3.png" alt="consulta deber 4 punto 3" width="400" height="auto"><br>
la consulta numero cuatro es la siguiente:<br>
<div class ="code-block">
    <div class ="code-header">SQL</div>
    <pre><code>SELECT p.nombre AS docente, a.nombre_asignatura, 
       SUM(TIMESTAMPDIFF(HOUR, h.hora_inicio, h.hora_fin)) AS horas_semana
FROM Horarios h
JOIN Asignaturas a ON h.id_asignatura = a.id_asignatura
JOIN Profesores p ON a.id_profesor = p.id_profesor
WHERE p.nombre = 'Darwin'
GROUP BY a.nombre_asignatura;</code></pre></div><br>
este codigo indica cuantas horas a la semana dicta el docente X y que materias corresponden a esas horas<br>
la visualizacion es la siguiente: <br>
<img src="Imagenes/consultad4.4.png" alt="consulta deber 4 punto 4" width="400" height="auto"><br>
la consulta numero cinco es la siguiente:<br>
<div class ="code-block">
    <div class ="code-header">SQL</div>
    <pre><code>SELECT a.nombre_asignatura, p.nombre AS docente, h.dia_semana, h.hora_inicio, h.hora_fin
FROM Horarios h
JOIN Asignaturas a ON h.id_asignatura = a.id_asignatura
JOIN Profesores p ON a.id_profesor = p.id_profesor
WHERE a.nombre_asignatura = 'manejo de base de datos';</code></pre></div><br>
este codigo indica en que dias y en que horarios se dicta la materia Base de Datos, y quien es el docente encargado<br>
la visualizacion es la siguiente: <br>
<img src="Imagenes/consultad4.5.png" alt="consulta deber 4 punto 5" width="400" height="auto"><br>
la consulta numero seis es la siguiente:<br>
<div class ="code-block">
    <div class ="code-header">SQL</div>
    <pre><code>SELECT a.nombre_asignatura, h.dia_semana, h.hora_inicio, h.hora_fin
FROM Horarios h
JOIN Asignaturas a ON h.id_asignatura = a.id_asignatura
JOIN Profesores p ON a.id_profesor = p.id_profesor
WHERE p.nombre = 'darwin' AND h.dia_semana IN ('martes','jueves');</code></pre></div><br>
este codigo indica que materias dicta el docente X los dias lunes y miercoles<br>
la visualizacion es la siguiente: <br>
<img src="Imagenes/consultad4.6.png" alt="consulta deber 4 punto 6" width="400" height="auto"><br>
la consulta numero siete es la siguiente:<br>
<div class ="code-block">
    <div class ="code-header">SQL</div>
    <pre><code>SELECT a.nombre_asignatura, p.nombre AS docente, h.hora_inicio, h.hora_fin
FROM Horarios h
JOIN Asignaturas a ON h.id_asignatura = a.id_asignatura
JOIN Profesores p ON a.id_profesor = p.id_profesor
WHERE h.dia_semana = 'jueves';</code></pre></div><br>
este codigo indica que materias estan programadas el jueves y que docente imparte cada una<br>
la visualizacion es la siguiente: <br>
<img src="Imagenes/consultad4.7.png" alt="consulta deber 4 punto 7" width="400" height="auto"><br>
        </div></p>
</div>
<div class="ejercicios">
    <h3>leccion 1: Procedimientos almacenados</h3>
    <p> Un procedimiento almacenado es un conjunto de instrucciones SQL que se almacenan en la base de datos y 
        <br>se pueden ejecutar cuando se necesiten. 
        <br>Permiten encapsular lógica de negocio y reutilizar código.</p>
        <h5>como se crean los procesos almacenados</h5>
        <p>para crearlos se usa la sentencia "create procedure"
            establecer parametros de entrada y salida si es necesario,<br>
            establecer las instrucciones entre los textos "begin" y "end"<br>
            usar el texto "delimiter" al inicio y al final para evitar conflictos con el punto y coma dentro del procedimiento.<br>
        </p>
        <h5>para que se usan y cuales son las ventajas</h5>
        <p>se usan para encapsular logica de negocio, mejorar el rendimiento, seguridad y mantenimiento del codigo.<br>
            las ventajas son: reutilizacion de codigo, rendimiento mejorado, seguridad, mantenimiento centralizado y reduccion del trafico de red.<br>
        </p>
        <h5>ejemplo practico</h5>
        <p>
            usaremos una tabla de alguno de los deberes anteriores, en este caso usaremos la tabla de estudiantes del deber 4<br>
            crearemos un procedimento almacenado que nos permita revisar cuando un nuevo estudiante es registrado, cuando uno es removido y cuando uno es actualizado.<br>
            luego crearemos otros procedimientos almacenados que nos digan que estudiantes estan aprobados y cuales no.<br>
            partamos con el primer procedimiento almacenado: estudiante registrado<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>DELIMITER //
CREATE PROCEDURE est_reg(in N varchar(100), A varchar(100), E varchar(100), ID int)
BEGIN
INSERT INTO estudiantes (nombre,apellido,email,id_curso) VALUES (N, A, E, ID);
END //
DELIMITER ;</code></pre>
            </div><br>
            este procedimiento almacenado nos permite registrar un nuevo estudiante en la tabla estudiante del deber 4<br>
            ahora podemos probarla y ver si funciona correctamente usando "call" y el nombre del procedimiento<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>CALL est_reg('jose', 'lopez', 'jose@gmail.com', 1);</code></pre>
            </div><br>
            si todo salio bien, el estudiante jose lopez deberia estar registrado en la tabla estudiantes, tal y como se ve en la imagen<br>
            <img src="Imagenes/test.proc.le1.png" alt="Prueba procedimiento almacenado leccion 1" width="400" height="auto"><br>
            ahora crearemos el procedimiento almacenado para eliminar un estudiante<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>DELIMITER //
create procedure elim_est (in id_est int)
begin
delete from estudiantes where id_estudiante = id_est;
end //
DELIMITER ;</code></pre>
            </div><br>
            este procedimiento almacenado nos permite eliminar un estudiante de la tabla estudiantes usando su id_estudiante<br>
            ahora podemos probarla y ver si funciona correctamente usando "call" y el nombre del procedimiento <br>
            y en este caso eliminaremos al estudiante jose lopez cuyo id es 1<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>CALL elim_est(1);</code></pre>
            </div><br>
            si todo salio bien, el estudiante jose lopez deberia haber sido eliminado de la tabla estudiantes, tal y como se ve en la imagen<br>
            <img src="Imagenes/test.proc.le2.png" alt="Prueba procedimiento almacenado leccion 1 eliminacion" width="400" height="auto"><br>
            ahora crearemos el procedimiento almacenado para actualizar un estudiante<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>DELIMITER //
create procedure act_est (in id_est int, n varchar(500), a varchar (500), e varchar(500), id_c int)
begin
update estudiantes set nombre = n, apellido = a, email = e, id_curso = id_c where id_estudiante = id_est;
end //
delimiter ;</code></pre></div><br>
            este procedimiento almacenado nos permite actualizar los datos de un estudiante en la tabla estudiantes usando su id_estudiante<br>
            ahora podemos probarla y ver si funciona correctamente usando "call" y el nombre del procedimiento <br>
            pero tendremos que añadir un nuevo estudiante para actualizarlo, en este caso añadiremos a "maria gonzalez"<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>INSERT INTO estudiantes (nombre, apellido, email, id_curso) VALUES ('maria', 'gonzalez', 'maria@gmail.com', 1);</code></pre>
            </div><br>
            ahora actualizaremos a maria gonzalez cuyo id es 2<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>CALL act_est(2, 'maria', 'lopez', 'maria@gmail.com', 1);</code></pre>
            </div><br>
            si todo salio bien, el estudiante maria gonzalez deberia haber sido actualizado en la tabla estudiantes, tal y como se ve en la imagen<br>
            <img src="Imagenes/test.proc.le3.png" alt="Prueba procedimiento almacenado leccion 1 actualizacion" width="400" height="auto"><br>
            ahora crearemos el procedimiento almacenado para añadir asignaturas nuevas<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>DELIMITER //
create procedure add_asig (in nom_asig varchar(100), id_prof int)
begin
insert into asignaturas (nombre_asignatura, id_profesor) values (nom_asig, id_prof);
end //
DELIMITER ;</code></pre></div><br>
            este procedimiento almacenado nos permite añadir nuevas asignaturas a la tabla asignaturas<br>
            ahora podemos probarla y ver si funciona correctamente usando "call" y el nombre del procedimiento <br>
            en este caso añadiremos la asignatura "desarrollo web" con el id del profesor 1<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>CALL add_asig('desarrollo web', 1);</code></pre></div><br>
            si todo salio bien, la asignatura desarrollo web deberia haber sido añadida en la tabla asignaturas, tal y como se ve en la imagen<br>
            <img src="Imagenes/test.proc.le4.png" alt="Prueba procedimiento almacenado leccion 1 add asignatura" width="400" height="auto"><br>
            el siguiente procedimento almacenado permitira registrar una nueva aula<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>DELIMITER //
create procedure add_aula (in nom_aula varchar(100), cant int)
begin
insert into aulas (nombre_aula, capacidad) values (nom_aula, cant);
end //
DELIMITER ;</code></pre></div><br>
            este procedimiento almacenado nos permite añadir nuevas aulas a la tabla aulas<br>
            ahora podemos probarla y ver si funciona correctamente usando "call" y el nombre del procedimiento <br>
            en este caso añadiremos la aula "aula 3" con la capacidad 10<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>CALL add_aula('aula 3', 10);</code></pre></div><br>
            si todo salio bien, la aula aula 3 deberia haber sido añadida en la tabla aulas, tal y como se ve en la imagen<br>
            <img src="Imagenes/test.proc.le5.png" alt="Prueba procedimiento almacenado leccion 1 add aula" width="400" height="auto"><br>
            ahora crearemos un procedimiento que permita borrar aulas<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>DELIMITER //
create procedure del_aula (in id_aul int)
begin
delete from aulas where id_aula = id_aul;
end //
DELIMITER ;</code></pre></div><br>
            este procedimiento almacenado nos permite borrar aulas de la tabla aulas<br>
            ahora podemos probarla y ver si funciona correctamente usando "call" y el nombre del procedimiento <br>
            en este caso borraremos la aula con id 3<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>CALL del_aula(3);</code></pre></div><br>
            si todo salio bien, la aula con id 3 deberia haber sido eliminada de la tabla aulas, tal y como se ve en la imagen<br>
            <img src="Imagenes/test.proc.le6.png" alt="Prueba procedimiento almacenado leccion 1 delete aula" width="400" height="auto"><br>
            ahora un proceso almacenado que permita añadir profesores<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>DELIMITER //
create procedure add_prof (in nom_prof varchar(100), ape_prof varchar(100), email_prof varchar(100))
begin
insert into profesores (nombre, apellido, email) values (nom_prof, ape_prof, email_prof);
end //
DELIMITER ;</code></pre></div><br>
            este procedimiento almacenado nos permite añadir nuevos profesores a la tabla profesores<br>
            ahora podemos probarla y ver si funciona correctamente usando "call" y el nombre del procedimiento <br>
            en este caso añadiremos al profesor "juan perez" con el email "juan.perez@ies.com"<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>CALL add_prof('juan', 'perez', 'juan.perez@ies.com');</code></pre></div><br>
            si todo salio bien, el profesor "juan perez" deberia haber sido añadido en la tabla profesores, tal y como se ve en la imagen<br>
            <img src="Imagenes/test.proc.le7.png" alt="Prueba procedimiento almacenado leccion 1 add profesor" width="400" height="auto"><br>
            ahora un procedimiento almacenado que permita eliminar profesores<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>DELIMITER //
create procedure del_prof (in id_prof int)
begin
delete from profesores where id_profesor = id_prof;
end //
DELIMITER ;</code></pre></div><br>
            este procedimiento almacenado nos permite eliminar profesores de la tabla profesores<br>
            ahora podemos probarla y ver si funciona correctamente usando "call" y el nombre del procedimiento <br>
            en este caso eliminaremos al profesor con id 3<br>
            <div class ="code-block">
                <div class ="code-header">SQL</div>
                <pre><code>CALL del_prof(3);</code></pre></div><br>
            si todo salio bien, el profesor con id 3 deberia haber sido eliminado de la tabla profesores, tal y como se ve en la imagen<br>
            <img src="Imagenes/test.proc.le8.png" alt="Prueba procedimiento almacenado leccion 1 delete profesor" width="400" height="auto"><br>
        </p>
    </div>
</main>
    </body>
</html>
